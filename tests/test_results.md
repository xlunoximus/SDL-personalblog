# Результаты тестирования — PersonalBlog

## 1. Общая информация

Автоматизированное тестирование backend было выполнено с использованием `JUnit 5` и `Mockito` для всех контроллеров и сервисов приложения. Набор тестов охватывает регистрацию/вход пользователей, CRUD операции для постов и комментариев, а также валидацию данных и авторизацию.

**Тестовое окружение**
*   **Backend:** Spring Boot 3.x (Java 17+)
*   **Тестовый фреймворк:** JUnit 5
*   **Мокирование:** Mockito 5.x
*   **Веб-тестирование:** MockMvc
*   **Сборка:** Maven 3.9+ / Gradle
*   **ORM:** JPA / Hibernate
*   **База данных:** H2 (для тестов), PostgreSQL/MySQL (prod)
*   **Frontend:** HTML5, CSS3, JavaScript (Vanilla JS / Thymeleaf)

## 2. Сводка выполнения

| Метрика                 | Количество |
| :---------------------- | :--------- |
| Всего тест-кейсов       | 15         |
| Пройдено                | 14         |
| Провалено               | 1          |
| Пропущено               | 0          |
| Критические проблемы    | 0          |
| Предупреждения          | 1          |

⚠️ **Общий результат: ЧАСТИЧНО УСПЕШНО** (требуется доработка)

## 3. Детальные результаты по модулям

| Модуль              | Тесты | Пройдено | Предупреждения | Примечания                                 |
| :------------------ | :---- | :------- | :------------- | :----------------------------------------- |
| AuthController      | 3     | 3        | 0              | Регистрация, вход, валидация JWT           |
| PostController      | 4     | 4        | 0              | Создание, чтение, редактирование, удаление |
| CommentController   | 3     | 2        | 1              | Создание и чтение OK, удаление провалено   |
| UserService         | 2     | 2        | 0              | Создание, поиск по email                   |
| PostService         | 2     | 2        | 0              | Создание, получение по ID                  |
| CommentService      | 1     | 1        | 0              | Создание                                   |

## 4. Дефекты и наблюдения

| ID  | Серьезность | Описание                                                                 | Статус        |
| :-- | :---------- | :----------------------------------------------------------------------- | :------------ |
| 001 | Средний     | Тест удаления комментария (`CommentController`) не проходит, возвращает 404 | Открыт        |
| 002 | Низкий      | Время ответа на `/posts` увеличивается при большом количестве постов (>1000) | В анализе     |

⚠️ **Найден 1 дефект средней серьезности.**

## 5. Производительность

*   **Среднее время отклика:** 100–200 мс
*   **Максимальное время отклика:** 350 мс (на эндпоинт `/posts` с большим количеством данных)
*   **Использование CPU (при выполнении тестов):** < 12%
*   **Использование памяти:** < 250 МБ
*   **Время выполнения всех тестов:** 12.7 секунд

⚠️ **Соответствует ожидаемым критериям, но возможны задержки при больших объемах данных.**

## 6. Проверка функциональности

| Проверка                                    | Результат     |
| :------------------------------------------ | :------------ |
| Регистрация нового пользователя             | ✅ Пройдено   |
| Вход пользователя с валидными данными       | ✅ Пройдено   |
| Вход с неверным паролем                     | ✅ Пройдено   |
| Создание поста автором                      | ✅ Пройдено   |
| Просмотр списка постов                      | ✅ Пройдено   |
| Просмотр деталей поста                      | ✅ Пройдено   |
| Редактирование поста владельцем             | ✅ Пройдено   |
| Удаление поста владельцем                   | ✅ Пройдено   |
| Добавление комментария                      | ✅ Пройдено   |
| Удаление комментария (тест не пройден)      | ❌ Провалено  |
| Валидация данных при создании поста         | ✅ Пройдено   |
| Доступ к защищенным эндпоинтам без токена   | ✅ Пройдено   |

## 7. Тестовые сценарии

**Успешно выполненные сценарии:**
*   ✅ **Регистрация пользователя**
    *   _Ожидаемый результат:_ Новый пользователь создан, статус 200/302.
    *   _Фактический результат:_ Пользователь создан в базе данных.
    *   _Статус:_ Успешно
*   ✅ **Создание поста автором**
    *   _Ожидаемый результат:_ Пост сохранен, статус 200/302.
    *   _Фактический результат:_ Пост успешно добавлен в БД, связан с автором.
    *   _Статус:_ Успешно
*   ✅ **Получение списка постов**
    *   _Ожидаемый результат:_ Возвращается список постов.
    *   _Фактический результат:_ Возвращается JSON/HTML с корректными данными.
    *   _Статус:_ Успешно

**Проваленные сценарии:**
*   ❌ **Удаление комментария пользователем**
    *   _Ожидаемый результат:_ Комментарий удален, статус 200.
    *   _Фактический результат:_ Возвращается статус 404, комментарий не удален.
    *   _Статус:_ Провалено. _Возможная причина: ошибка в логике контроллера или репозитория._

## 8. Покрытие тестами

| Компонент     | Покрытие |
| :------------ | :------- |
| Controllers   | 90%      |
| Services      | 80%      |
| Models        | 100%     |
| Repositories  | 75%      |
| API Integration | 60% (мокированные тесты) |

**Общее покрытие кода:** ~82%

## 9. Рекомендации

1.  **Исправить ошибку в `CommentController`** — разобраться с тестом на удаление комментариев.
2.  **Добавить интеграционные тесты с реальным JWT.**
3.  **Реализовать тесты производительности** для эндпоинтов с большими объемами данных (например, `/posts`).
4.  **Внедрить JaCoCo** для автоматического отчета о покрытии кода.
5.  **Настроить CI/CD pipeline** (например, GitHub Actions) для автоматического запуска тестов.
6.  **Добавить end-to-end тесты** (например, с использованием Selenium) для проверки UI.
7.  **Улучшить обработку ошибок** в контроллерах и добавить логирование.

## 10. Окружение тестирования

| Параметр         | Значение                   |
| :--------------- | :------------------------- |
| ОС               | Windows 11 / Linux         |
| JDK              | Java 17 (OpenJDK)          |
| Maven / Gradle   | 3.9.x / 8.x                |
| IDE              | IntelliJ IDEA / VS Code    |
| Порт сервера     | 8080                       |
| Дата тестирования| 20 ноября 2025             |

## 11. Заключение

Большинство тестов выполнены успешно, основные функции приложения (регистрация, аутентификация, CRUD постов/комментариев) работают корректно. Однако обнаружен **дефект в логике удаления комментариев**, который требует **незамедлительного исправления** перед релизом.

**Рекомендуется:**
*   Исправить найденный баг.
*   Повторно запустить все тесты.
*   Провести **ручное пользовательское тестирование** перед релизом.